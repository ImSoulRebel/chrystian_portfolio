---
import { ProjectCard } from '@components';
import { useTranslations, type Locale } from '@utils/i18n';
import { translations } from '@config/translations';
import * as assets from '@assets';

// Recibir locale como prop en lugar de detectarlo
interface Props {
  locale?: Locale;
}

const { locale = 'es' } = Astro.props;
const t = useTranslations(locale);

// Configuración de proyectos con URLs e imágenes
const projectsConfig = [
  {
    key: 'yuvod' as const,
    featured: true,
    liveUrl: 'https://yuvod.com',
    githubUrl: undefined,
    image: assets.yuvodLogo,
  },
  {
    key: 'nextival' as const,
    featured: false,
    liveUrl: undefined,
    githubUrl: 'https://github.com/ImSoulRebel/nextival-cms',
    image: assets.nextivalLogo,
  },
  {
    key: 'stelcamping' as const,
    featured: false,
    liveUrl: 'https://stel.es',
    githubUrl: undefined,
    image: assets.stelLogo,
  },
  {
    key: 'bnc10' as const,
    featured: false,
    liveUrl: undefined,
    githubUrl: undefined,
    image: assets.bnc10Logo,
  },
  {
    key: 'tookane' as const,
    featured: false,
    liveUrl: 'https://tookane.com',
    githubUrl: undefined,
    image: assets.tookaneLogo,
  },
];

// Construir proyectos desde traducciones + configuración
const projects = projectsConfig.map((config) => {
  const projectData = translations[locale].projects.list[config.key];
  return {
    title: projectData.title,
    stack: projectData.stack,
    description: projectData.description,
    impact: projectData.impact,
    featured: config.featured,
    liveUrl: config.liveUrl,
    githubUrl: config.githubUrl,
    image: config.image,
  };
});
---

<section id="projects" class="projects">
  <div class="container">
    <h2 class="section-title">{t('projects.title')}</h2>
    <div class="projects-grid">
      {
        projects.map((project) => (
          <ProjectCard
            title={project.title}
            stack={project.stack}
            description={project.description}
            impact={project.impact}
            featured={project.featured}
            liveUrl={project.liveUrl}
            githubUrl={project.githubUrl}
            image={project.image}
          />
        ))
      }
    </div>
  </div>
</section>
